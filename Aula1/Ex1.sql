/*
------------------------------------------------------------------

 						EXERC√çCIO 1 (27/01/25)
						    THIAGO OLSZEWSKI

------------------------------------------------------------------
*/

-- CREATING TABLE ALUNO
CREATE TABLE TESTES.ALUNO (
    ID INTEGER NOT NULL PRIMARY KEY,
    NOME VARCHAR(255),
    NUM_GRAU INTEGER
);

-- CREATING TABLE AMIGO
CREATE TABLE TESTES.AMIGO (
    ID_ALUNO INTEGER NOT NULL,
    ID_AMIGO INTEGER NOT NULL,
    CONSTRAINT ID_ALUNO FOREIGN KEY (ID_ALUNO) REFERENCES TESTES.ALUNO(ID),
    CONSTRAINT ID_AMIGO FOREIGN KEY (ID_AMIGO) REFERENCES TESTES.ALUNO(ID)
);

-- CREATING TABLE CURTIDA
CREATE TABLE TESTES.CURTIDA (
    ID_ALUNO INTEGER NOT NULL,
    ID_AMIGO INTEGER NOT NULL,
    CONSTRAINT ID_ALUNO FOREIGN KEY (ID_ALUNO) REFERENCES TESTES.ALUNO(ID),
    CONSTRAINT ID_AMIGO FOREIGN KEY (ID_AMIGO) REFERENCES TESTES.ALUNO(ID)
);

-- POVOATING TABLES
-- POVOATING ALUNO
INSERT INTO TESTES.ALUNO VALUES(1, 'THIAGO', 8);
INSERT INTO TESTES.ALUNO VALUES(2, 'ROBERTO', 6);
INSERT INTO TESTES.ALUNO VALUES(3, 'ANA', 7);
-- POVOATING AMIGO
INSERT INTO TESTES.AMIGO VALUES(1, 2);
INSERT INTO TESTES.AMIGO VALUES(1, 3);
INSERT INTO TESTES.AMIGO VALUES(2, 1);
-- POVOATING CURTIDA
INSERT INTO TESTES.CURTIDA VALUES(1, 2);
INSERT INTO TESTES.CURTIDA VALUES(3, 1);
INSERT INTO TESTES.CURTIDA VALUES(3, 2);

-- SELECTING ALL DATA FROM TABLES
SELECT * FROM TESTES.ALUNO;
SELECT * FROM TESTES.AMIGO;
SELECT * FROM TESTES.CURTIDA;

-- SELECTING WITH LEFT JOIN - NOME AND NOME_AMIGO
SELECT 
    ALUNO.NOME AS NOME_ALUNO, 
    AMIGO.NOME AS NOME_AMIGO
FROM 
    TESTES.AMIGO AS AMIGO_TABELA
LEFT JOIN 
    TESTES.ALUNO AS ALUNO ON AMIGO_TABELA.ID_ALUNO = ALUNO.ID
LEFT JOIN 
    TESTES.ALUNO AS AMIGO ON AMIGO_TABELA.ID_AMIGO = AMIGO.ID;

-- SELECTING WITH RIGHT JOIN
SELECT * FROM TESTES.AMIGO RIGHT JOIN TESTES.ALUNO ON ALUNO.ID = AMIGO.ID_ALUNO;

-- SELECT USING INNER JOIN WITH ALL TABLES
SELECT * FROM TESTES.AMIGO INNER JOIN TESTES.ALUNO ON AMIGO.ID_ALUNO = ALUNO.ID INNER JOIN TESTES.CURTIDA ON AMIGO.ID_ALUNO = CURTIDA.ID_AMIGO;

